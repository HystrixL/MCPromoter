# Changelog

## [0.1.0] - 2021-07-01
万恶之源
#### 新增

- 模块基本框架搭建
- 开始从旧作MCDP-V1.3.0移植内容


## [0.2.0] - 2021-07-02
面向Ctrl C+V的功能移植进程
### 新增

- 使用实例字典的方式完成玩家及服务器信息的存储
- 多线程获取信息实现
- 继续进行MCDP-V1.3.0功能的移植

### 更改

- 完善PlayerDatas类及GameDatas类
- 逐步规范命名规则

### 修复

- @mcd导致崩服的bug


## [1.0.0] - 2021-07-03

### 新增
喜欢吗？砍了。
- 基本完成MCDP-V1.3.0功能的全部移植
- 加入新的自杀提示信息(整活)
- 完成帮助信息

### 更改

- 完善指令操作反馈，尽量降低对其他玩家的干扰
- 优化部分实例实例化的位置，以优化插件运行效果
- @sh更名为@rc

### 修复

- @mcd导致崩服的bug

### 移除

- @load、@qb、@health、跨世界传送


## [1.0.1] - 2021-07-03
每次实装@=第一次都会有bug
### 更改

- 微调@=的使用方式
- 精简代码

### 修复

- 修复@=、@ki status、@mg status无效的bug


## [1.1.0] - 2021-07-03

### 新增

- 实现玩家退服后死亡记录点的持续保存


## [1.1.1] - 2021-07-04
奠基*1
### 新增

- 完成配置文件读取与写入的类

### 更改

- 继续精简代码
- 完善了几个可能会导致bug的小细节

## [1.2.0] - 2021-07-05
重构了好多内容，实现了一直想做的配置文件
### 新增

- 完成插件加载时配置文件的初始化、读取及处理
- 现在可通过修改配置文件快速更改存档名、反作弊开关、白名单、admin权限名单、指令白名单、自定义自杀信息、指令前缀而无需重新编译插件
- 实现基于MCP的插件内置玩家白名单机制，可不依赖于Microsoft的白名单，避免受其服务器抽风的影响。

### 更改

- 将存档名、反作弊开关、白名单、admin权限名单、指令白名单、自定义自杀信息、指令前缀通过数组/变量的方式存储，便于进行修改
- 优化@=的表达式提取逻辑
- 优化@rc的指令提取逻辑
- 优化自定义自杀信息的处理逻辑
- 优化@ban及@rc的admin权限判断逻辑
- 优化越权使用@ban及@rc的信息提示，并取消自动踢出
- 优化反作弊判断逻辑，使其更加严格

## [1.2.1] - 2021-07-05
水版本号*1
### 新增

- 插件配置文件初始化及加载的提示

## [1.2.2] - 2021-07-05
大E了
### 修复

- 修复未在白名单内的玩家加入后服务端崩溃的bug

## [1.2.3] - 2021-07-05

### 更改

- 将插件内置白名单识别从uuid修改为xuid，以匹配官方原版白名单机制

## [1.3.0] - 2021-07-05

### 新增
- 加入@mcp setting reload，可直接在游戏内重载配置文件，并返回提示

### 更改
- 修改自定义死亡提示中的玩家名关键词

### 修复
- 反作弊初始化后不生效的bug
- 使用无效指令/越权使用指令后的提示中的@前缀未随设置修改的bug

## [1.4.0] - 2021-07-05
一天更新(水)七个版本的快乐
### 新增
- 加入@whitelist [add|remove] ，可直接在游戏内修改内置白名单

### 修复
- 帮助文件前缀未随设置修改的bug

### 移除
- @ban，其主要功能并入@whitelist remove

## [1.4.1] - 2021-07-06
好耶 出去玩了一天，水一条更新
### 修复
- 配置文件长度过长而被错误截断

## [1.4.2] - 2021-07-06
小更新再水一条
### 新增
- 服务器开服时间可通过配置文件修改，默认值为插件第一次初始化时间

### 更改
- 通过一个静态类PluginInfo来存储插件基本信息

## [1.5.0] - 2021-07-07

### 新增
- 特殊权限指令使用数组存储，可通过配置文件进行修改
- MCP指令前缀、反作弊系统开关可在游戏内通过@mcp setting进行快速修改

### 更改
- 优化特殊权限指令越权使用的识别方式，简化代码
- 简化反作弊系统状态识别部分代码

## [1.5.1] - 2021-07-09
(分不清什么时候该用静态类，什么时候该用实例类
### 更改
- 将服务器信息存储更改为静态类
- 服务器开服时间读取移到插件初始化阶段

## [1.6.0] - 2021-07-09
好像获取不到准确的CPU占用率
### 新增
- 加入@system [cpu|memory]用于获取服务器的CPU/内存占用率

## [1.7.0] - 2021-07-10
应某人要求的@qs，年轻人的第一个嵌套多线程
### 新增
- 实装QuickSleep @qs，可投票快速跳过夜晚

## [1.7.1] - 2021-07-10
感觉@qs逻辑以后得重写一下，还是怪怪的
### 更改
- 优化@qs计算逻辑，开始投票后即可显示需投票人数
- 优化@qs投票逻辑，玩家在支持票与反对票之间可相互转换

## [1.7.2] - 2021-07-10

### 更改
- 服务器内只有一个人时无法使用@qs

### 修复
- 多次使用@qs后人数不断累加

## [1.7.3] - 2021-07-10
最终还是开始打扰其它玩家了
### 更改
- 大量指令反馈可见范围的更改

## [1.8.0] - 2021-07-11
每次@qb的实装就意味着一个插件的灵感要断流了
### 新增
- 实装@qb，可在游戏内快速备份、回档、重启服务器

### 更改
- 优化初始化及配置文件加载逻辑，以适配@qb

## [1.9.0] - 2021-07-11
好耶，可以作更多次死
### 新增
- 加入多槽位@qb，最多可同时保存5份备份，并可独立添加注释
- 加入@qb list，用于获取各槽位信息(存档名、备份时间、注释)

### 更改
- 优化初始化逻辑，以适配多槽位@qb

## [1.9.1] - 2021-07-11
@qb主体没啥bug，针不戳
### 更改
- 优化初始化及配置文件加载逻辑